<div class="container">
  <div class="row valign-wrapper">
    <section class="col s6 row">
      <div class="col s6">
        <h4><%= title.toUpperCase() %></h4>
        <% if(typeof errorMessage !== 'undefined') {%>
            <span><%= errorMessage %></span>
        <% } %>
      </div>
      <div class="input-field col s5">
        <input id="search" type="text" class="validate">
        <label for="search">Search</label>
      </div>
    </section>
    <section class="col s6 offset-l2 row">
      <button data-target="new-patient" class="btn modal-trigger teal lighten-2 right">New</button>
      <%- include('./new-patient')%>
    </section>
  </div>

<table class="responsive-table">
  <thead>
    <tr>
      <th>NAME</th>
      <th>EMAIL</th>
      <th>CONTACT PHONE</th>
      <th>HISTORY</th>
      <th>EDIT</th>
    </tr>
  </thead>
  <tbody>
    <% patients.forEach(user => { %>
      <tr>
        <td><%= user.name %><span> <%= user.surname %></span></td>
        <td><%= user.email %></td>
        <td><%= user.contact.phone %></td>
        <td class="width-fix">
          <a class="icon-color icon-table" href="/<%= user._id %>/history">
            <i class="small material-icons">assignment</i>
          </a>
        </td>
        <td class="width-fix">
          <a class="icon-color icon-table modal-trigger" href="#modal-edit-patient">
            <i class="small material-icons">edit</i>
          </a>
          <div id="modal-edit-patient" class="modal">
            <%- include('./edit-patient', { user, control: 'total' })%>
          </div>
        </td>
      </tr>
    <%  }) %>
  </tbody>
</table>
</div>
